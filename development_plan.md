# План разработки Telegram бота для обучения с веб-приложением

## Общее описание
Создание обучающей платформы с Telegram ботом и веб-приложением на Next.js. Система будет включать структурированные уроки по темам и подтемам, с возможностью отслеживания прогресса и избранных уроков.

## Архитектура
- **База данных**: SQLite для простоты и портативности
- **Backend**: Node.js с Express.js для API
- **Frontend**: Next.js с React для веб-приложения
- **Telegram Bot**: Node.js Telegram Bot API

## Структура данных

### Основные сущности
1. **Пользователи (Users)**
   - Telegram ID
   - Имя пользователя
   - Дата регистрации
   - Прогресс обучения

2. **Темы (Topics)**
   - Название темы
   - Описание
   - Порядок сортировки

3. **Подтемы (Subtopics)**
   - Название подтемы
   - Описание
   - Связь с темой
   - Порядок сортировки

4. **Уроки (Lessons)**
   - Название урока
   - Содержание (текст, изображения, видео)
   - Порядок в подтеме
   - Оценка сложности

5. **Прогресс (Progress)**
   - Пользователь
   - Урок
   - Статус завершения
   - Дата завершения

6. **Избранное (Favorites)**
   - Пользователь
   - Урок
   - Дата добавления

## Этапы разработки

### Этап 1: Настройка проекта и базы данных
- [ ] Создать структуру проекта
- [ ] Настроить SQLite базу данных
- [ ] Создать схему таблиц
- [ ] Реализовать миграции

### Этап 2: Backend API
- [ ] Создать Express.js сервер
- [ ] Реализовать API endpoints:
  - GET /api/topics - получить все темы
  - GET /api/topics/:id/subtopics - получить подтемы темы
  - GET /api/subtopics/:id/lessons - получить уроки подтемы
  - GET /api/lessons/:id - получить конкретный урок
  - POST /api/users/:id/progress - обновить прогресс
  - POST /api/users/:id/favorites - добавить/удалить избранное
  - GET /api/users/:id/progress - получить прогресс пользователя
  - GET /api/users/:id/favorites - получить избранное пользователя

### Этап 3: Telegram Bot
- [ ] Настроить Telegram Bot API
- [ ] Реализовать команды:
  - /start - приветствие и меню
  - /topics - показать доступные темы
  - /progress - показать прогресс
  - /favorites - показать избранное
- [ ] Реализовать навигацию по урокам
- [ ] Интеграция с backend API

### Этап 4: Веб-приложение (Next.js)
- [ ] Создать проект Next.js
- [ ] Реализовать страницы:
  - Главная страница с темами
  - Страница подтем
  - Страница уроков
  - Страница прогресса
  - Страница избранного
- [ ] Компоненты:
  - Карточка темы/подтемы/урока
  - Прогресс-бар
  - Кнопки действий (в избранное, отметить завершенным)
- [ ] Стилизация с использованием Tailwind CSS

### Этап 5: Интеграция и тестирование
- [ ] Подключить frontend к backend API
- [ ] Тестирование Telegram бота
- [ ] Тестирование веб-приложения
- [ ] Тестирование синхронизации данных

## Технологический стек

### Backend
- Node.js
- Express.js
- SQLite3
- node-telegram-bot-api
- cors, body-parser

### Frontend
- Next.js 14
- React 18
- Tailwind CSS
- Axios для API запросов

### Database
- SQLite для разработки
- Возможность миграции на PostgreSQL в будущем

## Дополнительные функции (на будущее)
- Система достижений
- Рейтинг пользователей
- Экспорт прогресса
- Мультиязычность
- Push-уведомления
- Статистика обучения

## Развертывание
- Backend: Heroku, Railway, или VPS
- Frontend: Vercel (оптимизировано для Next.js)
- Database: SQLite для MVP, PostgreSQL для продакшена

## Безопасность
- Валидация входных данных
- Защита от SQL инъекций
- Аутентификация пользователей через Telegram
- CORS настройки
- Rate limiting для API